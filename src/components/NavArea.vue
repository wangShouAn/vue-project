<script setup>
import { ref, onMounted, onUnmounted } from 'vue'

const logo =
  'https://my.tcb-life.com.tw/assets/%E5%90%88%E5%BA%AB%E4%BA%BA%E5%A3%BDLOGO-BPgS4Q-a.svg'

const navItems = ref([
  {
    open: false,
    name: 'ä¿æˆ¶æœå‹™',
    img: 'https://my.tcb-life.com.tw/api/assets/2a009399-4329-4913-98f4-e7e896c4c17f',
    item: [
      [
        { text: 'åˆ©çŽ‡çœ‹æ¿', type: 'link' },
        { text: 'åŒ¯çŽ‡è³‡è¨Š', type: 'link' },
        { text: 'é›»å­å–®æ“šæœå‹™', type: 'link' },
        { text: 'è¡Œå‹•èº«åˆ†è­˜åˆ¥èº«åˆ†èªè­‰æœå‹™', type: 'link' },
        { text: 'å¤–ä¾†äººå£ã€Œæ–°å¼çµ±ä¸€è­‰è™Ÿã€å°ˆå€', type: 'link' },
      ],
      [
        { text: 'è¡¨å–®ä¸‹è¼‰', type: 'link' },
        { text: 'ä¿æˆ¶å°ˆå€', type: 'link' },
        { text: 'å¸¸è¦‹å•é¡Œ', type: 'link' },
        { text: 'è¯çµ¡æˆ‘å€‘', type: 'link' },
        { text: 'å°Šäº«VIP', type: 'link' },
        { text: 'åˆä½œé‡‘åº«äººå£½APPå°ˆå€', type: 'link' },
      ],
      [
        {
          text: 'å¥‘ç´„è®Šæ›´ä½œæ¥­',
          type: 'title',
          item: [
            { text: 'å¥‘ç´„è®Šæ›´', type: 'link' },
            { text: 'ä¿å…¨è¯ç›Ÿéˆæœå‹™', type: 'link' },
          ],
        },
        { text: 'ä¿è¯å¼·åˆ¶åŸ·è¡Œå°ˆå€', type: 'link' },
      ],
    ],
  },
  { open: false, name: 'å®‰å¿ƒå®ˆè­·' },
  {
    open: false,
    name: 'æ‰€æœ‰å•†å“',
    img: 'https://my.tcb-life.com.tw/api/assets/18634038-b350-4491-b36b-ee18adbaea0b',
    item: [
      [
        { text: 'ç†±é–€å•†å“', type: 'link' },
        { text: 'æŠ•è³‡åž‹ä¿éšª', type: 'link' },
        { text: 'å£½éšª', type: 'link' },
        { text: 'æ„å¤–å‚·å®³ä¿éšª', type: 'link' },
        { text: 'å¥åº·é†«ç™‚ä¿éšª', type: 'link' },
        { text: 'æˆ¿è²¸åž‹ä¿éšª', type: 'link' },
      ],
      [
        { text: 'é™„åŠ èˆ‡æ‰¹è¨»æ¢æ¬¾', type: 'link' },
        { text: 'ç¶²è·¯æŠ•ä¿å•†å“', type: 'link' },
        { text: 'é›»è©±è¡ŒéŠ·å•†å“', type: 'link' },
        {
          text: 'éŠ€è¡ŒæŠ•ä¿å•†å“',
          type: 'title',
          item: [
            { text: 'å‚³é€åž‹å•†å“', type: 'link' },
            { text: 'æŠ•è³‡åž‹å•†å“', type: 'link' },
            { text: 'æˆ¿è²¸åž‹å•†å“', type: 'link' },
          ],
        },
      ],
    ],
  },
  {
    open: false,
    name: 'å…¬å¹³å¾…å®¢',
    img: 'https://my.tcb-life.com.tw/api/assets/7d15c00b-e668-4e88-a314-64007642b2aa',
    item: [
      [
        {
          text: 'å…¬å¹³å¾…å®¢ç†å¿µ',
          type: 'title',
          item: [
            { text: 'ç¸½ç¶“ç†çš„è©±', type: 'link' },
            { text: 'å…¬å¹³å¾…å®¢åå¤§åŽŸå‰‡', type: 'link' },
            { text: 'è½å¯¦å…¬å¹³å¾…å®¢æŽªæ–½', type: 'link' },
          ],
        },
        {
          text: 'å‹å–„æœå‹™',
          type: 'title',
          item: [
            { text: 'ç„¡éšœç¤™ç¶²ç«™', type: 'link' },
            { text: 'é‡‘èžå‹å–„æœå‹™', type: 'link' },
            { text: 'å‹å–„æœå‹™ç›¸é—œè¨Šæ¯', type: 'link' },
          ],
        },
      ],
      [
        {
          text: 'æ„Ÿå‹•èˆ‡æˆå°±',
          type: 'title',
          item: [
            { text: 'å…¬ç›Šæ´»å‹•ç´€éŒ„', type: 'link' },
            { text: 'å®‰å¿ƒå®ˆè­·', type: 'link' },
            { text: 'æ°¸çºŒç™¼å±•', type: 'link' },
          ],
        },
        { text: 'æ¨‚é½¡å°ˆå€', type: 'link' },
        { text: 'é˜²è©å°ˆå€', type: 'link' },
      ],
    ],
  },
  {
    open: false,
    name: 'ä¿éšªçŸ¥è­˜åº«',
    img: 'https://my.tcb-life.com.tw/api/assets/37cf93be-3d13-4f68-becf-b8c9ad76b1c5',
    item: [
      [
        { text: 'å½±éŸ³å°ˆå€', type: 'link' },
        { text: 'é‡‘èžå°å¸¸è­˜', type: 'link' },
      ],
    ],
  },
  {
    open: false,
    name: 'é—œæ–¼æˆ‘å€‘',
    img: 'https://my.tcb-life.com.tw/api/assets/0a55befe-f8aa-43ce-b8b3-8d63b54807df',
    item: [
      [
        { text: 'åˆä½œé‡‘åº«äººå£½ç°¡ä»‹', type: 'link' },
        { text: 'é¦–é•·è³‡æ–™', type: 'link' },
        { text: 'å¾—çŽç´€éŒ„', type: 'link' },
        { text: 'ä¿¡ç”¨è©•åƒ¹', type: 'link' },
        { text: 'è¯çµ¡æˆ‘å€‘', type: 'link' },
        { text: 'å…¬ç›Šå’–å•¡', type: 'link' },
      ],
      [
        { text: 'æ°¸çºŒç™¼å±•', type: 'link' },
        { text: 'åˆä½œé‡‘æŽ§', type: 'link' },
        { text: 'åˆä½œé‡‘æŽ§æ°¸çºŒç™¼å±•', type: 'link' },
        { text: 'æ³•å•†æ³•åœ‹å·´é»Žä¿éšªæŽ§è‚¡å…¬å¸', type: 'link' },
        { text: 'é—œä¿‚ä¼æ¥­', type: 'link' },
      ],
    ],
  },
  { open: false, name: 'ðŸ¤”' },
])

function openMenu(index) {
  navItems.value.forEach((item) => {
    item.open = false
  })
  navItems.value[index].open = true
}
function closeMenu() {
  navItems.value.forEach((item) => {
    item.open = false
  })
}

const isVisible = ref(false)

function handleScroll() {
  isVisible.value = window.scrollY > 0
}

onMounted(() => {
  window.addEventListener('scroll', handleScroll)
})

onUnmounted(() => {
  window.removeEventListener('scroll', handleScroll)
})
</script>

<template>
  <nav :class="{ isVisible: !isVisible }">
    <img :src="logo" />
    <ul>
      <li v-for="(item, index) in navItems" :key="index">
        <button @mouseenter="openMenu(index)">
          {{ item.name }}
        </button>
        <menu @mouseleave="closeMenu()" v-if="item.open && item.item">
          <img v-if="item.img" :src="item.img" />

          <ul v-for="(subItems, subIndex) in item.item" :key="subIndex">
            <li v-for="(subItem, i) in subItems" :key="i">
              <a v-if="subItem.type === 'link'" :href="subItem.text">{{ subItem.text }}</a>
              <div v-else-if="subItem.type === 'title'">
                <p>{{ subItem.text }}</p>
                <div>
                  <template v-for="(subSubItem, si) in subItem.item" :key="si">
                    <a>{{ subSubItem.text }} </a>
                    <br />
                  </template>
                </div>
              </div>
            </li>
          </ul>
        </menu>
      </li>
    </ul>
  </nav>
</template>
<style lang="scss" scoped>
nav {
  &.isVisible {
    box-shadow: none;
  }
  transition: all 1s linear;
  box-shadow: 0 0 1vw rgba(0, 0, 0, 0.4);
  width: 75%;
  display: flex;
  justify-content: space-around;
  align-items: center;
  height: 5vw;
  background-color: #fff;
  position: sticky;
  top: 2vw;
  left: 50%;
  z-index: 999;
  margin-top: 1vw;
  border-radius: 4vw;
  transform: translateX(-15%);
  img {
    width: 16vw;
  }
  ul {
    display: flex;
    li {
      list-style: none;
      button {
        overflow: hidden;
        text-align: center;
        white-space: nowrap;
        text-overflow: ellipsis;
        background-color: #fff;
        border: none;
        border-radius: 0.5vw;
        padding: 1vw;
        margin: 0 0.5vw;
        font-size: 1vw;
        cursor: pointer;
        &:hover {
          background-color: #008e6a;
          color: #fff;
        }
      }
      menu {
        box-sizing: border-box;
        overflow-x: scroll;
        display: flex;
        position: fixed;
        width: 80vw;
        height: auto;
        min-height: 30vw;
        top: 5vw;
        left: 50%;
        transform: translateX(-50%);

        background-color: white;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        border-radius: 2vw;
        padding: 2vw;
        img {
          width: 20vw;
          height: 15vw;
          border-radius: 2vw;
        }
        ul {
          display: flex;
          flex-direction: column;

          li {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 1vw 0;
            a {
              width: 15vw;
              color: #000;
              font-size: 1.5vw;
              text-decoration: none;
              &:hover {
                text-decoration: underline;
              }
            }
            div {
              margin: 0;
              padding: 0;
              display: flex;
              flex-direction: column;
              p {
                margin: 0;
                margin-bottom: 2vw;
                padding: 0;
                font-size: 1.5vw;
                color: #000;
              }
              a {
                margin-bottom: 2vw;
                color: #666;
              }
            }
          }
        }
      }
    }
  }
}
</style>
